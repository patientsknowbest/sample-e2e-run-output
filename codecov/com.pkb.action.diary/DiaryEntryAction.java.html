<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DiaryEntryAction.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">E2E Tests Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.pkb.action.diary</a> &gt; <span class="el_source">DiaryEntryAction.java</span></div><h1>DiaryEntryAction.java</h1><pre class="source lang-java linenums">package com.pkb.action.diary;

import com.opensymphony.xwork2.Action;
import com.pkb.action.file.ChunkedUploadAction;
import com.pkb.action.message.ComposeMessageAction;
import com.pkb.action.support.DiaryEntryTransformer;
import com.pkb.app.entity.LoggedInEHRRequestContext;
import com.pkb.app.entity.SourceDetails;
import com.pkb.diary.entity.DiaryEntry;
import com.pkb.document.entity.Attachment;
import com.pkb.dto.DiaryEntryDto;
import com.pkb.entities.enums.MenuDataType;
import com.pkb.exception.PKBException;
import com.pkb.mappers.DiaryEntryMapper;
import com.pkb.mappers.ImmutableEntityDependency;
import com.pkb.notification.entity.Activity;
import com.pkb.service.datapoint.DataWithUIPermissions;
import com.pkb.service.diary.DiaryManager;
import com.pkb.service.team.TeamUserManager;
import com.pkb.util.Pager;
import org.apache.commons.lang3.StringUtils;
import org.apache.struts2.interceptor.validation.SkipValidation;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;

import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.time.Instant;
import java.time.ZoneId;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeParseException;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Optional;
import java.util.UUID;

import static com.pkb.user.entity.PKBPerson.Lazy.CONTACTS;
import static java.util.Optional.ofNullable;
import static org.apache.commons.collections4.CollectionUtils.isEmpty;
import static org.apache.commons.collections4.CollectionUtils.isNotEmpty;
import static org.apache.commons.lang3.StringUtils.isBlank;
import static org.apache.commons.lang3.StringUtils.trimToEmpty;

<span class="fc" id="L46">public class DiaryEntryAction extends ChunkedUploadAction {</span>

    private static final long serialVersionUID = 1L;
    private static final String NAMESPACE_DIARY = &quot;diary&quot;;

    private DiaryManager diaryManager;
    private TeamUserManager teamUserManager;
    private DiaryEntry diaryEntry;

    @Autowired
    private DiaryEntryMapper diaryEntryMapper;

    @Autowired
    private DiaryEntryTransformer diaryEntryTransformer;

    // For myDiary.jsp
    private List&lt;DiaryEntryDto&gt; entryDtoList;
    private List&lt;DataWithUIPermissions&lt;DiaryEntry&gt;&gt; diaryEntryList;
    private List&lt;DiaryEntry&gt; diaryEntryListToDelete;

    private Long dataPointId;

    // For composeDiaryEntry.jsp
    private Long id;
    private String date;
    private String time;
    private String subjectOfEntry;
    private String entryText;
    private UUID uniqueId;

    // Attachments
    private String attachmentFileName;
    private Long attachmentId;
    private String attachmentContentType;
    private int contentLength;
    private InputStream inputStream;
    private String attachmentName;
    private String unwantedAttachment;
<span class="fc" id="L84">    private String fileUploadErrorMessage = &quot;&quot;;</span>
    private String attachmentSubmit;

    // For selecting entries
    private List&lt;Long&gt; selectId;
    private Pager pager;

    private List&lt;Long&gt; recipientId;

    private boolean editPrivacyOnly;

<span class="fc" id="L95">    private static final Logger LOGGER = LoggerFactory.getLogger(java.lang.invoke.MethodHandles.lookup().lookupClass());</span>

    private String discussMessage;

    private List&lt;Attachment&gt; discussAttachments;

    private String discussTopic;

<span class="fc" id="L103">    private String customStyle = MOBILE_OPTIMIZED_STYLE;</span>

    public String getTab() {
<span class="fc" id="L106">        return &quot;diary&quot;;</span>
    }

    public String getSubTab() {
<span class="fc" id="L110">        return &quot;journal&quot;;</span>
    }

    // For displaying to user
    private String formatDateString(Date d, ZoneId timeZone) {
<span class="pc bpc" id="L115" title="1 of 2 branches missed.">        String dateString = dateUtil.getPKBFormattedDate(d == null ? null : d.toInstant(), getLocale(), timeZone);</span>

<span class="fc" id="L117">        char leadchar = dateString.charAt(0);</span>
<span class="pc bpc" id="L118" title="1 of 2 branches missed.">        if (Character.isDigit(leadchar)) {</span>
<span class="fc" id="L119">            return &quot;on &quot; + dateString;</span>
        }

<span class="nc" id="L122">        return Character.toLowerCase(leadchar) + dateString.substring(1);</span>
    }

    @Override
    public String input() {
<span class="nc" id="L127">        return Action.INPUT;</span>
    }

    @Override
    public String execute() {
<span class="nc" id="L132">        return Action.SUCCESS;</span>
    }

    public String getDiaryEntries() {
<span class="fc" id="L136">        long accountId = getAccountId();</span>
<span class="fc" id="L137">        getPager().setRecordCount((int) diaryManager.getDiaryEntryCount(getEHRRequestContext(), accountId));</span>
<span class="fc" id="L138">        List&lt;DiaryEntry&gt; diaryEntries = retrieveDiaryEntries(accountId, getPager().getOffset(), getPager().getPerPage());</span>
<span class="fc bfc" id="L139" title="All 2 branches covered.">        for (DiaryEntry e : diaryEntries) {</span>
<span class="fc" id="L140">            e.setAttachmentList(diaryManager.getDiaryAttachments(getLoggedInEHRRequestContext(), e.getId()));</span>
<span class="fc" id="L141">        }</span>
<span class="fc" id="L142">        diaryEntryList = dataPointManager.getPermissions(diaryEntries, loggedInUserUtil.getLoggedInUser(), loggedInUserUtil.getLoggedInUserPrimaryTeam());</span>
<span class="fc" id="L143">        entryDtoList = diaryEntryMapper.entitiesToDtos(diaryEntryList, ImmutableEntityDependency.&lt;DiaryEntry&gt;builder()</span>
<span class="fc" id="L144">                .locale(getLocale())</span>
<span class="fc" id="L145">                .iOSDevice(userAgentAnalyzerBean.isAnIOSDevice())</span>
<span class="fc" id="L146">                .allowNHSAppAttachmentDownload(sessionUtil.getDynamicFeatures().allowNHSAppAttachmentDownload())</span>
<span class="fc" id="L147">                .loggedInRequestContext(getLoggedInEHRRequestContext())</span>
<span class="fc" id="L148">                .build());</span>

<span class="fc" id="L150">        customStyle = MOBILE_OPTIMIZED_STYLE;</span>
<span class="fc" id="L151">        return Action.SUCCESS;</span>
    }

    private List&lt;DiaryEntry&gt; retrieveDiaryEntries(long accountId, int offset, int perPage) {
<span class="fc" id="L155">        return diaryEntryTransformer.transformDiaryEntry(diaryManager.getDiaryEntries(getLoggedInEHRRequestContext(), accountId, offset,</span>
                perPage));
    }

    private long getAccountId() {
<span class="fc" id="L160">        contextUserId = contextUserUtil.getContextUserId();</span>
<span class="fc" id="L161">        long patientId = contextUserUtil.getContextOrLoggedInUserId();</span>
<span class="fc" id="L162">        return userManager.getDefaultAccountId(patientId);</span>
    }

    public String editDiaryEntry() {
<span class="fc" id="L166">        DateTimeFormatter dateFormat = getDateWithHHmmFormatter(getZoneIdOfLoggedInUser());</span>
        String dateTime;
<span class="fc bfc" id="L168" title="All 2 branches covered.">        if (id == null) {</span>
<span class="fc" id="L169">            dateTime = dateTimeService.nowZoned(getZoneIdOfLoggedInUser()).format(dateFormat);</span>
<span class="fc" id="L170">            subjectOfEntry = &quot;&quot;;</span>
<span class="fc" id="L171">            entryText = &quot;&quot;;</span>
<span class="fc" id="L172">            messageWebBean.removeAttachmentsFromSession(session);</span>
<span class="fc" id="L173">            setDefaultFlag();</span>
        } else {
<span class="fc" id="L175">            disablePrivacyFlagEditForm();</span>
<span class="fc" id="L176">            diaryEntry = retrieveDiaryEntry(id);</span>
<span class="fc" id="L177">            uniqueId = diaryEntry.getBaseFields().getUniqueId();</span>

<span class="fc" id="L179">            dateTime = dateToString(diaryEntry.getDiaryEntryTimestamp(), dateFormat);</span>
<span class="fc" id="L180">            subjectOfEntry = diaryEntry.getSubjectOfEntry();</span>
<span class="fc" id="L181">            entryText = diaryEntry.getEntryText();</span>
<span class="fc" id="L182">            attachments = diaryManager.getDiaryAttachmentsWithoutContents(this.id);</span>
<span class="fc" id="L183">            messageWebBean.setAttachmentsInSession(attachments, session);</span>
        }
<span class="fc" id="L185">        String[] split = StringUtils.split(dateTime, &quot; &quot;);</span>
<span class="fc" id="L186">        date = split[0];</span>
<span class="fc" id="L187">        time = split[1];</span>

<span class="fc" id="L189">        customStyle = NO_CUSTOM_STYLE;</span>
<span class="fc" id="L190">        return Action.SUCCESS;</span>
    }

    private DiaryEntry retrieveDiaryEntry(Long id) {
<span class="fc" id="L194">        return diaryEntryTransformer.transformDiaryEntry(diaryManager.getDiaryEntry(getLoggedInEHRRequestContext(), id));</span>
    }

    public String saveDiaryEntry() {
<span class="fc" id="L198">        contextUserId = getEHRRequestContext().getContextUserId().orElse(null);</span>
<span class="fc" id="L199">        long patientId = getLoggedInEHRRequestContext().getContextOrAccessingUserId();</span>
<span class="fc" id="L200">        long accessingUserId = getLoggedInEHRRequestContext().getAccessingUserId();</span>
<span class="fc" id="L201">        Long accountId = userManager.getDefaultAccountId(patientId);</span>
<span class="fc" id="L202">        attachments = messageWebBean.getAttachmentsFromSession(session);</span>

<span class="fc" id="L204">        boolean errors = false;</span>
<span class="pc bpc" id="L205" title="1 of 2 branches missed.">        if (isBlank(date)) {</span>
<span class="nc" id="L206">            addFieldError(&quot;date&quot;, getText(&quot;composeDiaryEntry.err.enter_date&quot;));</span>
<span class="nc" id="L207">            errors = true;</span>
        }

<span class="pc bpc" id="L210" title="1 of 2 branches missed.">        if (isBlank(time)) {</span>
<span class="nc" id="L211">            addFieldError(&quot;time&quot;, getText(&quot;composeDiaryEntry.err.enter_time&quot;));</span>
<span class="nc" id="L212">            errors = true;</span>
        }

<span class="fc" id="L215">        Instant entryDate = null;</span>
        try {
<span class="fc" id="L217">            DateTimeFormatter dateTimeFormat = getDateWithHHmmFormatter(getZoneIdOfLoggedInUser());</span>
<span class="fc" id="L218">            entryDate = parseToInstantWithFormatter(trimToEmpty(date) + &quot; &quot; + trimToEmpty(time), dateTimeFormat);</span>
<span class="nc" id="L219">        } catch (DateTimeParseException ignored) {</span>
<span class="nc" id="L220">            addFieldError(&quot;time&quot;, getText(&quot;composeDiaryEntry.err.enter_date_time&quot;));</span>
<span class="nc" id="L221">            errors = true;</span>
<span class="fc" id="L222">        }</span>

<span class="pc bpc" id="L224" title="1 of 2 branches missed.">        if (errors) {</span>
<span class="nc" id="L225">            refillPrivacyFlags();</span>
<span class="nc" id="L226">            return INPUT;</span>
        }

<span class="fc" id="L229">        diaryEntry = createDiaryEntry(entryDate);</span>
<span class="fc" id="L230">        fillPrivacyFlagIfSetIn(diaryEntry);</span>

<span class="fc bfc" id="L232" title="All 2 branches covered.">        if (id != null) {</span>
<span class="fc" id="L233">            DiaryEntry oldDiaryEntry = retrieveDiaryEntry(id);</span>
<span class="fc" id="L234">            oldDiaryEntry.getBaseFields().getPrivacyFlag().ifPresent(diaryEntry::setPrivacyFlag);</span>
        }

<span class="fc" id="L237">        diaryEntry.setId(id);</span>
<span class="fc" id="L238">        diaryEntry.getBaseFields().setUniqueId(uniqueId);</span>

<span class="fc" id="L240">        diaryEntry.getSource().init(getEHRRequestContext());</span>

<span class="fc bfc" id="L242" title="All 2 branches covered.">        if (uniqueId == null) {</span>
<span class="fc" id="L243">            logActivityByOthers(Activity.Action.ADDED_DIARY_ENTRY, dateTimeService.now(), true, diaryEntry, getLoggedInEHRRequestContext());</span>
        } else {
<span class="fc" id="L245">            logActivityByOthers(Activity.Action.EDITED_DIARY_ENTRY, dateTimeService.now(), true, diaryEntry, getLoggedInEHRRequestContext());</span>
        }
<span class="fc" id="L247">        diaryManager.saveDiaryEntry(getLoggedInEHRRequestContext(), accessingUserId, accountId, diaryEntry, attachments);</span>
<span class="fc" id="L248">        messageWebBean.removeAttachmentsFromSession(session);</span>
<span class="fc" id="L249">        getDiaryEntries();</span>
<span class="fc" id="L250">        return Action.SUCCESS;</span>
    }

    private DiaryEntry createDiaryEntry(Instant entryDate) {
<span class="fc" id="L254">        diaryEntry = new DiaryEntry(new SourceDetails(getEHRRequestContext()));</span>
<span class="fc" id="L255">        diaryEntry.setDiaryEntryTimestamp(Date.from(entryDate));</span>
<span class="fc" id="L256">        diaryEntry.setSubjectOfEntry(subjectOfEntry);</span>
<span class="fc" id="L257">        diaryEntry.setEntryText(entryText);</span>
<span class="fc" id="L258">        return diaryEntry;</span>
    }

    public String discussDiaryEntry() {
<span class="fc" id="L262">        StringBuilder messageText = new StringBuilder();</span>
<span class="fc" id="L263">        messageText.append(&quot;\n\n-----------\n&quot; + getText(&quot;diaryEntryAction.txt.diary_posts&quot;) + &quot;\n-----------&quot;);</span>
<span class="fc" id="L264">        messageWebBean.removeAttachmentsFromSession(session);</span>
<span class="fc" id="L265">        attachments = new ArrayList&lt;&gt;();</span>

<span class="fc" id="L267">        findDiaryEntryById(id).ifPresent(diaryEntry -&gt; {</span>
<span class="fc" id="L268">            messageText.append(&quot;\n\n\&quot;&quot; + diaryEntry.getSubjectOfEntry() + &quot;\&quot; &quot;</span>
<span class="fc" id="L269">                    + formatDateString(diaryEntry.getDiaryEntryTimestamp(), loggedInUserUtil.getLoggedInUserZoneId()) + &quot;:\n&quot;);</span>
<span class="fc" id="L270">            messageText.append(diaryEntry.getEntryText());</span>
<span class="fc" id="L271">            attachments.addAll(diaryManager.getDiaryAttachments(getLoggedInEHRRequestContext(), diaryEntry.getId()));</span>
<span class="fc" id="L272">        });</span>

<span class="fc" id="L274">        discussMessage = messageText.toString();</span>
<span class="fc" id="L275">        discussAttachments = attachments;</span>
<span class="fc" id="L276">        discussTopic = ComposeMessageAction.TOPIC_DIARY_ENTRIES;</span>
<span class="fc" id="L277">        sessionUtil.setContextRecipientId(getLoggedInEHRRequestContext());</span>

<span class="fc" id="L279">        return DISCUSS;</span>
    }

    public String editPrivacyForm() {
<span class="fc" id="L283">        DiaryEntry diaryEntry = retrieveDiaryEntry(dataPointId);</span>
<span class="pc bpc" id="L284" title="1 of 2 branches missed.">        if (hasNotPermissionsToEditPrivacyLabels(diaryEntry, loggedInUserUtil.getLoggedInUser(), loggedInUserUtil.getLoggedInUserPrimaryTeam())) {</span>
<span class="nc" id="L285">            return CANCEL;</span>
        }
<span class="fc" id="L287">        fillPrivacyFlagsFrom(diaryEntry);</span>
<span class="fc" id="L288">        customStyle = NO_CUSTOM_STYLE;</span>
<span class="fc" id="L289">        return INPUT;</span>
    }

    @SkipValidation
    public String editPrivacySave() {
<span class="fc" id="L294">        LoggedInEHRRequestContext loggedInEHRRequestContext = getLoggedInEHRRequestContext();</span>
<span class="fc" id="L295">        var users = getContextAndLoggedInUsers(loggedInEHRRequestContext,CONTACTS);</span>
<span class="fc" id="L296">        DiaryEntry diaryEntry = diaryManager.getDiaryEntry(loggedInEHRRequestContext, dataPointId);</span>
<span class="pc bpc" id="L297" title="1 of 2 branches missed.">        if (hasNotPermissionsToEditPrivacyLabels(diaryEntry, loggedInEHRRequestContext)) {</span>
<span class="nc" id="L298">            return CANCEL;</span>
        }
<span class="fc" id="L300">        privacyService.handlePrivacyChange(diaryEntry, MenuDataType.diaryEntry, getNewFlag(), loggedInEHRRequestContext,</span>
<span class="fc" id="L301">                getAccountId(), users.contextUser(), users.loggedInUser());</span>
<span class="fc" id="L302">        return SUCCESS;</span>
    }

    @SkipValidation
    public String editPrivacyCancel() {
<span class="nc" id="L307">        return CANCEL;</span>
    }

    // Called from 'Delete' button on myDiary.jsp
    public String deleteDiaryEntry() {
        try {
<span class="pc bpc" id="L313" title="1 of 2 branches missed.">            if (isEmpty(selectId)) {</span>
<span class="nc" id="L314">                addActionError(getText(&quot;diaryEntryAction.err.select_at_least_one&quot;));</span>
<span class="nc" id="L315">                return RELOAD;</span>
            }
<span class="fc" id="L317">            getSelectedEntriesList();</span>

<span class="pc bpc" id="L319" title="1 of 2 branches missed.">            if (diaryEntryListToDelete.isEmpty()) {</span>
<span class="nc" id="L320">                return RELOAD;</span>
            }

<span class="fc" id="L323">            customStyle = NO_CUSTOM_STYLE;</span>
<span class="fc" id="L324">            return &quot;deleteDiaryEntriesConfirm&quot;;</span>
<span class="nc" id="L325">        } catch (Exception e) {</span>
<span class="nc" id="L326">            LOGGER.error(&quot;Exception while confirming delete entries &quot;, e);</span>
<span class="nc" id="L327">            return RELOAD;</span>
        }
    }

    // Called to confirm deletion
    public String deleteDiaryEntries() {
<span class="fc" id="L333">        Long accountId = getAccountId();</span>

<span class="pc bpc" id="L335" title="1 of 2 branches missed.">        if (isNotEmpty(selectId)) {</span>
<span class="fc bfc" id="L336" title="All 2 branches covered.">            for (Long entryId : selectId) {</span>
<span class="fc" id="L337">                SourceDetails deletedBy = new SourceDetails(getEHRRequestContext());</span>
<span class="fc" id="L338">                diaryManager.deleteDiaryEntry(getEHRRequestContext(), accountId, entryId, deletedBy);</span>
<span class="fc" id="L339">            }</span>
<span class="fc" id="L340">            addActionMessage(getText(&quot;diaryEntryAction.msg.deletion_successfull&quot;));</span>
        }
<span class="fc" id="L342">        getDiaryEntries();</span>
<span class="fc" id="L343">        selectId = null;</span>
<span class="fc" id="L344">        return Action.SUCCESS;</span>
    }

    public String cancelDelete() {
<span class="nc" id="L348">        return RELOAD;</span>
    }

    public String cancel() {
<span class="nc" id="L352">        return Action.SUCCESS;</span>
    }

    private List&lt;DiaryEntry&gt; getSelectedEntriesList() {
<span class="fc" id="L356">        Long accountId = getAccountId();</span>
<span class="fc" id="L357">        List&lt;Long&gt; selectedIds = new ArrayList&lt;&gt;(selectId);</span>
<span class="fc" id="L358">        diaryEntryListToDelete = retrieveDiaryEntryList(accountId, selectedIds);</span>
<span class="fc" id="L359">        return diaryEntryListToDelete;</span>
    }

    private List&lt;DiaryEntry&gt; retrieveDiaryEntryList(Long accountId, List&lt;Long&gt; selectedIds) {
<span class="fc" id="L363">        return diaryEntryTransformer.transformDiaryEntry(diaryManager.getEntryListByIds(getLoggedInEHRRequestContext(), selectedIds, accountId));</span>
    }

    private Optional&lt;DiaryEntry&gt; findDiaryEntryById(long diaryId) {
<span class="fc" id="L367">        return ofNullable(diaryEntryTransformer.transformDiaryEntry(diaryManager.getDiaryEntry(getLoggedInEHRRequestContext(), diaryId)));</span>
    }

    public String getDiaryAttachment() {
        Attachment att;
        try {
<span class="nc" id="L373">            String currentUserId = Long.toString(loggedInUserUtil.getLoggedInUserId());</span>

<span class="nc" id="L375">            att = messageWebBean.getAttachment(getLoggedInEHRRequestContext(), attachmentId, currentUserId);</span>
<span class="nc" id="L376">            attachmentFileName = att.getFilename();</span>
<span class="nc" id="L377">            attachmentContentType = att.getMediaType();</span>
<span class="nc" id="L378">            contentLength = att.getContent().length;</span>
<span class="nc" id="L379">            inputStream = new ByteArrayInputStream(att.getContent());</span>

<span class="nc" id="L381">        } catch (Exception exception) {</span>
            // can't download; let struts return the error page (after logging
            // the user id, browser, etc.)
<span class="nc" id="L384">            throw new PKBException(&quot;failed getting attachment &quot; + attachmentId + &quot; for diaryEntry &quot; + id, exception);</span>
<span class="nc" id="L385">        }</span>
<span class="nc" id="L386">        return &quot;success&quot;;</span>

    }

    @Override
    public String getCustomStyle() {
<span class="fc" id="L392">        return customStyle;</span>
    }

    public DiaryManager getDiaryManager() {
<span class="nc" id="L396">        return diaryManager;</span>
    }

    public void setDiaryManager(DiaryManager diaryManager) {
<span class="fc" id="L400">        this.diaryManager = diaryManager;</span>
<span class="fc" id="L401">    }</span>

    public Long getAttachmentId() {
<span class="nc" id="L404">        return attachmentId;</span>
    }

    public void setAttachmentId(Long attachmentId) {
<span class="nc" id="L408">        this.attachmentId = attachmentId;</span>
<span class="nc" id="L409">    }</span>

    public List&lt;DiaryEntryDto&gt; getEntryDtoList() {
<span class="fc" id="L412">        return entryDtoList;</span>
    }

    public List&lt;DataWithUIPermissions&lt;DiaryEntry&gt;&gt; getDiaryEntryList() {
<span class="fc" id="L416">        return diaryEntryList;</span>
    }

    public void setDiaryEntryList(List&lt;DataWithUIPermissions&lt;DiaryEntry&gt;&gt; diaryEntryList) {
<span class="nc" id="L420">        this.diaryEntryList = diaryEntryList;</span>
<span class="nc" id="L421">    }</span>

    public String getAttachmentContentType() {
<span class="nc" id="L424">        return attachmentContentType;</span>
    }

    public void setAttachmentContentType(String attachmentContentType) {
<span class="nc" id="L428">        this.attachmentContentType = attachmentContentType;</span>
<span class="nc" id="L429">    }</span>

    public int getContentLength() {
<span class="nc" id="L432">        return contentLength;</span>
    }

    public void setContentLength(int contentLength) {
<span class="nc" id="L436">        this.contentLength = contentLength;</span>
<span class="nc" id="L437">    }</span>

    public InputStream getInputStream() {
<span class="nc" id="L440">        return inputStream;</span>
    }

    public void setInputStream(InputStream inputStream) {
<span class="nc" id="L444">        this.inputStream = inputStream;</span>
<span class="nc" id="L445">    }</span>

    public Long getId() {
<span class="fc" id="L448">        return id;</span>
    }

    public void setId(Long id) {
<span class="fc" id="L452">        this.id = id;</span>
<span class="fc" id="L453">    }</span>

    public UUID getUniqueId() {
<span class="fc" id="L456">        return uniqueId;</span>
    }

    public void setUniqueId(UUID uniqueId) {
<span class="fc" id="L460">        this.uniqueId = uniqueId;</span>
<span class="fc" id="L461">    }</span>

    public String getSubjectOfEntry() {
<span class="fc" id="L464">        return subjectOfEntry;</span>
    }

    public void setSubjectOfEntry(String subjectOfEntry) {
<span class="fc" id="L468">        this.subjectOfEntry = subjectOfEntry;</span>
<span class="fc" id="L469">    }</span>

    public String getEntryText() {
<span class="fc" id="L472">        return entryText;</span>
    }

    public void setEntryText(String entryText) {
<span class="fc" id="L476">        this.entryText = entryText;</span>
<span class="fc" id="L477">    }</span>

    public String getDate() {
<span class="fc" id="L480">        return date;</span>
    }

    public void setDate(String date) {
<span class="fc" id="L484">        this.date = date;</span>
<span class="fc" id="L485">    }</span>

    public String getAttachmentFileName() {
<span class="nc" id="L488">        return attachmentFileName;</span>
    }

    public void setAttachmentFileName(String attachmentFileName) {
<span class="nc" id="L492">        this.attachmentFileName = attachmentFileName;</span>
<span class="nc" id="L493">    }</span>

    public String getAttachmentName() {
<span class="nc" id="L496">        return attachmentName;</span>
    }

    public void setAttachmentName(String attachmentName) {
<span class="nc" id="L500">        this.attachmentName = attachmentName;</span>
<span class="nc" id="L501">    }</span>

    public String getUnwantedAttachment() {
<span class="nc" id="L504">        return unwantedAttachment;</span>
    }

    public void setUnwantedAttachment(String unwantedAttachment) {
<span class="nc" id="L508">        this.unwantedAttachment = unwantedAttachment;</span>
<span class="nc" id="L509">    }</span>

    public void setFileUploadErrorMessage(String fileUploadErrorMessage) {
<span class="nc" id="L512">        this.fileUploadErrorMessage = fileUploadErrorMessage;</span>
<span class="nc" id="L513">    }</span>

    public String getFileUploadErrorMessage() {
<span class="fc" id="L516">        return fileUploadErrorMessage;</span>
    }

    public List&lt;Long&gt; getSelectId() {
<span class="nc" id="L520">        return selectId;</span>
    }

    public void setSelectId(List&lt;Long&gt; selectId) {
<span class="fc" id="L524">        this.selectId = selectId;</span>
<span class="fc" id="L525">    }</span>

    public Pager getPager() {
<span class="fc bfc" id="L528" title="All 2 branches covered.">        if (pager == null) {</span>
<span class="fc" id="L529">            pager = new Pager();</span>
<span class="fc" id="L530">            pager.setPerPage(getConfig().getPatientDiaryEntriesPerPage());</span>
        }
<span class="fc" id="L532">        return pager;</span>
    }

    public void setPager(Pager pager) {
<span class="nc" id="L536">        this.pager = pager;</span>
<span class="nc" id="L537">    }</span>

    public List&lt;Long&gt; getRecipientId() {
<span class="fc" id="L540">        return recipientId;</span>
    }

    public void setRecipientId(List&lt;Long&gt; recipientId) {
<span class="nc" id="L544">        this.recipientId = recipientId;</span>
<span class="nc" id="L545">    }</span>

    public TeamUserManager getTeamUserManager() {
<span class="fc" id="L548">        return teamUserManager;</span>
    }

    public void setTeamUserManager(TeamUserManager teamUserManager) {
<span class="fc" id="L552">        this.teamUserManager = teamUserManager;</span>
<span class="fc" id="L553">    }</span>

    public List&lt;DiaryEntry&gt; getDiaryEntryListToDelete() {
<span class="fc" id="L556">        return diaryEntryListToDelete;</span>
    }

    public void setDiaryEntryListToDelete(List&lt;DiaryEntry&gt; diaryEntryListToDelete) {
<span class="nc" id="L560">        this.diaryEntryListToDelete = diaryEntryListToDelete;</span>
<span class="nc" id="L561">    }</span>

    public String getAttachmentSubmit() {
<span class="fc" id="L564">        return attachmentSubmit;</span>
    }

    public void setAttachmentSubmit(String attachmentSubmit) {
<span class="nc" id="L568">        this.attachmentSubmit = attachmentSubmit;</span>
<span class="nc" id="L569">    }</span>

    public String getTime() {
<span class="fc" id="L572">        return time;</span>
    }

    public void setTime(String time) {
<span class="fc" id="L576">        this.time = time;</span>
<span class="fc" id="L577">    }</span>

    public boolean isEditPrivacyOnly() {
<span class="fc" id="L580">        return editPrivacyOnly;</span>
    }

    public void setEditPrivacyOnly(boolean editPrivacyOnly) {
<span class="fc" id="L584">        this.editPrivacyOnly = editPrivacyOnly;</span>
<span class="fc" id="L585">    }</span>

    public String getDiscussMessage() {
<span class="fc" id="L588">        return discussMessage;</span>
    }

    public void setDiscussMessage(String discussMessage) {
<span class="nc" id="L592">        this.discussMessage = discussMessage;</span>
<span class="nc" id="L593">    }</span>

    public List&lt;Attachment&gt; getDiscussAttachments() {
<span class="fc" id="L596">        return discussAttachments;</span>
    }

    public void setDiscussAttachments(List&lt;Attachment&gt; discussAttachments) {
<span class="nc" id="L600">        this.discussAttachments = discussAttachments;</span>
<span class="nc" id="L601">    }</span>

    public String getDiscussTopic() {
<span class="fc" id="L604">        return discussTopic;</span>
    }

    public void setDiscussTopic(String discussTopic) {
<span class="nc" id="L608">        this.discussTopic = discussTopic;</span>
<span class="nc" id="L609">    }</span>

    @Override
    public void prepare() throws Exception {
<span class="fc" id="L613">        super.prepare();</span>
<span class="fc" id="L614">    }</span>

    public Long getDataPointId() {
<span class="fc" id="L617">        return dataPointId;</span>
    }

    public void setDataPointId(Long dataPointId) {
<span class="fc" id="L621">        this.dataPointId = dataPointId;</span>
<span class="fc" id="L622">    }</span>

    @Override
    public String getNamespace() {
<span class="fc" id="L626">        return NAMESPACE_DIARY;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>
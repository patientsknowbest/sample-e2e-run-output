<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Pager.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">E2E Tests Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.pkb.util</a> &gt; <span class="el_source">Pager.java</span></div><h1>Pager.java</h1><pre class="source lang-java linenums">//------------------------------------------------------------------------------
//
// Copyright (c) 2011 PatientsKnowBest, Inc. All Rights Reserved.
//
// $Id: $
//
//------------------------------------------------------------------------------

package com.pkb.util;

/**
 * Bean for holding details on pagination, to help manage links on JSPs.
 * Usage:
 * Set the recordCount (total records available to be paginated),
 * perPage (number of records to show per-page) and
 * page (defaults to 1)
 * ...and it will calculate values for next and previous page (-1 if non-available)
 * and the record offset for the current page (e.g., offset 10 for page 2 with perPage 10)
 *
 * Page numbers are 1-indexed to be displayable... i.e., the first page is &quot;1&quot;, not &quot;0&quot;.
 * Record indexes (for the offset) are assumed to be 0-indexed.
 *
 * @author robwhelan
 */
<span class="fc" id="L25">public class Pager {</span>

    /** pageSize value for getting all records */
    public static final int ALL = 0;

    private int recordCount;

    private int perPage;

    /** 1-indexed for nicer display; default to 1 */
<span class="fc" id="L35">    private int page = 1;</span>

    public int getPageCount() {
        // sanity checks
<span class="fc bfc" id="L39" title="All 2 branches covered.">        if (recordCount &lt;= 0) {</span>
<span class="fc" id="L40">            return 0; // no records = no pages</span>
        }

<span class="pc bpc" id="L43" title="1 of 2 branches missed.">        if (perPage &lt;= 0) {</span>
<span class="nc" id="L44">            return 1; // invalid perPage value = show all</span>
        }

        // simple int arithmetic will truncate; we need to round up
<span class="fc" id="L48">        return (int) Math.ceil((double) recordCount / (double) perPage);</span>
    }

    public int getPrevPage() {
<span class="nc bnc" id="L52" title="All 2 branches missed.">        if (page &lt;= 1) {</span>
<span class="nc" id="L53">            return -1; // no previous page</span>
        } else {
<span class="nc" id="L55">            return page - 1;</span>
        }
    }

    public int getNextPage() {
<span class="nc bnc" id="L60" title="All 2 branches missed.">        if (page &lt;= 0) {</span>
<span class="nc" id="L61">            return 1;</span>
<span class="nc bnc" id="L62" title="All 2 branches missed.">        } else if (page &gt;= getPageCount()) {</span>
<span class="nc" id="L63">            return -1; // no next page</span>
        } else {
<span class="nc" id="L65">            return page + 1;</span>
        }
    }

    public int getOffset() {
<span class="fc bfc" id="L70" title="All 2 branches covered.">        if (getRecordCount() == 0) {</span>
<span class="fc" id="L71">            return 0;</span>
        }

<span class="pc bpc" id="L74" title="2 of 4 branches missed.">        if ((page &lt; 1) || (page &gt; getPageCount())) {</span>
<span class="nc" id="L75">            throw new IllegalArgumentException(&quot;can't calculate pagination offset: invalid page: &quot; + page);</span>
        }

<span class="fc" id="L78">        int page0indexed = page - 1;</span>
<span class="fc" id="L79">        return page0indexed * perPage;</span>
    }

    public int getShowingFrom() {
<span class="nc" id="L83">        return getOffset() + 1;</span>
    }

    public int getShowingThrough() {
        // assume we're showing a full page of records until we hit the full record count
<span class="nc" id="L88">        return Math.min(getOffset() + getPerPage(), getRecordCount());</span>
    }

    public boolean isShowPager() {
<span class="pc bpc" id="L92" title="1 of 2 branches missed.">        return getPageCount() &gt; 1;</span>
    }

    public boolean hasPreviousPage() {
<span class="nc bnc" id="L96" title="All 2 branches missed.">        return page &gt; 1;</span>
    }

    public boolean hasNextPage() {
<span class="nc bnc" id="L100" title="All 2 branches missed.">        return page &lt; getPageCount();</span>
    }

    public int getRecordCount() {
<span class="fc" id="L104">        return recordCount;</span>
    }

    public void setRecordCount(int recordCount) {
<span class="fc" id="L108">        this.recordCount = recordCount;</span>
<span class="fc" id="L109">    }</span>

    public int getPerPage() {
<span class="fc" id="L112">        return perPage;</span>
    }

    public void setPerPage(int perPage) {
<span class="fc" id="L116">        this.perPage = perPage;</span>
<span class="fc" id="L117">    }</span>

    public int getPage() {
<span class="nc" id="L120">        return page;</span>
    }

    public void setPage(int page) {
<span class="nc" id="L124">        this.page = page;</span>
<span class="nc" id="L125">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>
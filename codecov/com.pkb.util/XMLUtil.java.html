<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>XMLUtil.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">E2E Tests Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.pkb.util</a> &gt; <span class="el_source">XMLUtil.java</span></div><h1>XMLUtil.java</h1><pre class="source lang-java linenums">//------------------------------------------------------------------------------
//
// Copyright (c) 2009-2013 PatientsKnowBest, Inc. All Rights Reserved.
//
// $Id:  XMLUtil.java May 25, 2009 12:41:18 PM mahendera$
//
//------------------------------------------------------------------------------

package com.pkb.util;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.converters.Converter;
import com.thoughtworks.xstream.security.AnyTypePermission;

import java.util.List;
import java.util.Map;

/**
 * Utitlity class to marshal and unmarshal XML using XStream
 *
 * @author mahendera
 *
 */
<span class="nc" id="L24">public class XMLUtil {</span>

    /**
     * Marshalls object to xml using XStream &lt;b&gt;Description&lt;/b&gt;:
     *
     * @param object
     * @return
     */
    public static String marshall(Object object) {
<span class="nc" id="L33">        XStream xstream = getXstream(null);</span>

<span class="nc" id="L35">        return xstream.toXML(object);</span>

    }

    /**
     * Marshalls object to xml using XStream &lt;b&gt;Description&lt;/b&gt;:
     *
     * @param xml
     * @return
     */
    public static Object unmarshall(String xml) {
<span class="nc" id="L46">        XStream xstream = getXstream(null);</span>

<span class="nc" id="L48">        return xstream.fromXML(xml);</span>

    }

    /**
     * Marshalls object to xml using XStream &lt;b&gt;Description&lt;/b&gt;:
     *
     * @param object
     * @param alias
     * @return
     */
    public static String marshall(Object object, Map&lt;String, Class&gt; alias) {
<span class="nc" id="L60">        XStream xstream = getXstream(alias);</span>
<span class="nc" id="L61">        return xstream.toXML(object);</span>

    }

    /**
     * Unmarshalls xml to object using XStream &lt;b&gt;Description&lt;/b&gt;:
     *
     * @param xml
     * @param alias
     * @return
     */
    public static Object unmarshall(String xml, Map&lt;String, Class&gt; alias) {
<span class="fc" id="L73">        XStream xstream = getXstream(alias);</span>
<span class="fc" id="L74">        return xstream.fromXML(xml);</span>
    }

    /**
     * Marshalls object to xml using XStream &lt;b&gt;Description&lt;/b&gt;:
     *
     * @param object
     * @param alias
     * @param converter
     * @return
     */
    public static String marshall(Object object, Map&lt;String, Class&gt; alias, Converter converter) {
<span class="nc" id="L86">        XStream xstream = getXstream(alias);</span>
<span class="nc" id="L87">        xstream.registerConverter(converter);</span>
<span class="nc" id="L88">        return xstream.toXML(object);</span>

    }

    /**
     * Marshalls object to xml using XStream and Prevents a field from being serialized.
     *
     * @param object
     * @param clazz
     * @param fieldNameToOmit
     * @return
     */
    public static String marshall(Object object, Class clazz, String fieldNameToOmit) {
<span class="nc" id="L101">        XStream xstream = getXstream(null);</span>
<span class="nc" id="L102">        xstream.omitField(clazz, fieldNameToOmit);</span>
<span class="nc" id="L103">        return xstream.toXML(object);</span>

    }

    /**
     * Marshalls object to xml using XStream and Prevents a field from being serialized.
     *
     * @param object
     * @param clazz
     * @param fieldNameToOmit
     * @return
     */
    public static String marshall(Object object, Class clazz, String... fieldNamesToOmit) {
<span class="nc" id="L116">        XStream xstream = getXstream(null);</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">        for (String fieldName : fieldNamesToOmit) {</span>
<span class="nc" id="L118">            xstream.omitField(clazz, fieldName);</span>
        }
<span class="nc" id="L120">        return xstream.toXML(object);</span>

    }

    /**
     * Marshalls object to xml using XStream and Prevents a field from being serialized.
     *
     * @param object
     * @param clazz
     * @param fieldNameToOmit
     * @return
     */
    public static String marshall(Object object, Map&lt;String, Class&gt; alias, List&lt;Object[]&gt; classAndfieldNameToOmit) {
<span class="nc" id="L133">        XStream xstream = getXstream(alias);</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">        for (Object[] objects : classAndfieldNameToOmit) {</span>
<span class="nc" id="L135">            xstream.omitField((Class) objects[0], (String) objects[1]);</span>
<span class="nc" id="L136">        }</span>
<span class="nc" id="L137">        return xstream.toXML(object);</span>
    }

    /**
     * Marshalls object to xml using XStream and Prevents a field from being serialized.
     *
     * @param object
     * @param alias
     * @param clazz
     * @param fieldNameToOmit
     * @return
     */
    public static String marshall(Object object, Map&lt;String, Class&gt; alias, Class clazz, String fieldNameToOmit) {
<span class="nc" id="L150">        XStream xstream = getXstream(alias);</span>
<span class="nc" id="L151">        xstream.omitField(clazz, fieldNameToOmit);</span>
<span class="nc" id="L152">        return xstream.toXML(object);</span>

    }

    /**
     * Unmarshalls xml to object using XStream &lt;b&gt;Description&lt;/b&gt;:
     *
     * @param xml
     * @param alias
     * @param converter
     * @return
     */
    public static Object unmarshall(String xml, Map&lt;String, Class&gt; alias, Converter converter) {
<span class="nc" id="L165">        XStream xstream = getXstream(alias);</span>
<span class="nc" id="L166">        xstream.registerConverter(converter);</span>
<span class="nc" id="L167">        return xstream.fromXML(xml);</span>
    }

    static void setAlias(Map&lt;String, Class&gt; alias, XStream xstream) {
<span class="fc bfc" id="L171" title="All 2 branches covered.">        for (Map.Entry&lt;String, Class&gt; stringClassEntry : alias.entrySet()) {</span>
<span class="fc" id="L172">            xstream.alias(stringClassEntry.getKey(), stringClassEntry.getValue());</span>
<span class="fc" id="L173">        }</span>
<span class="fc" id="L174">    }</span>

    static XStream getXstream(Map&lt;String, Class&gt; alias) {
<span class="fc" id="L177">        XStream xstream = new XStream();</span>
<span class="fc" id="L178">        XStream.setupDefaultSecurity(xstream);</span>
<span class="fc" id="L179">        xstream.addPermission(AnyTypePermission.ANY);</span>
<span class="pc bpc" id="L180" title="1 of 2 branches missed.">        if (alias != null) {</span>
<span class="fc" id="L181">            setAlias(alias, xstream);</span>
        }

<span class="fc" id="L184">        return xstream;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>
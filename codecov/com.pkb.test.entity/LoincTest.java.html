<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LoincTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">E2E Tests Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.pkb.test.entity</a> &gt; <span class="el_source">LoincTest.java</span></div><h1>LoincTest.java</h1><pre class="source lang-java linenums">package com.pkb.test.entity;

import com.google.common.base.MoreObjects;
import org.hibernate.annotations.Cache;
import org.hibernate.annotations.CacheConcurrencyStrategy;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EnumType;
import javax.persistence.Enumerated;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.persistence.Transient;
import java.io.Serializable;
import java.util.Objects;

@Entity
@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
@Table
<span class="fc" id="L22">public class LoincTest implements Serializable, TestResultType {</span>
    private static final long serialVersionUID = 1L;

    public static final String CODING_SYSTEM = &quot;loinc&quot;;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column(length = 10, nullable = false)
    private String loinc;

    /**
     * The name in English IS actually in the DB table, via our SQL script.
     * BUT we don't want Hibernate to load it from there; instead the web layer must use getNameKey()
     * and set the translated version of the name.
     */
    @Transient
    private transient String name;

<span class="fc" id="L42">    @Column(nullable = false)</span>
    @Enumerated(EnumType.STRING)
    private ValueType expectedValueType = ValueType.NUMERIC; // defaults to NUMERIC

    @Column(length = 100)
    private String unit;

    /** for LabTestsOnline.co.uk reference link */
    @Column(length = 100)
    private String onlineRefKey;

    @Override
    public String toString() {
<span class="nc" id="L55">        return MoreObjects.toStringHelper(LoincTest.class)</span>
<span class="nc" id="L56">                .omitNullValues()</span>
<span class="nc" id="L57">                .add(&quot;id&quot;, id)</span>
<span class="nc" id="L58">                .add(&quot;loinc&quot;, loinc)</span>
<span class="nc" id="L59">                .add(&quot;expectedValueType&quot;, expectedValueType)</span>
<span class="nc" id="L60">                .add(&quot;unit&quot;, unit)</span>
<span class="nc" id="L61">                .add(&quot;onlineRefKey&quot;, onlineRefKey)</span>
<span class="nc" id="L62">                .toString();</span>
    }

    // for TestResultType interface
    @Override
    public String getTestCodingSystem() {
<span class="fc" id="L68">        return CODING_SYSTEM;</span>
    }

    @Override
    public String getTestCode() {
<span class="fc" id="L73">        return getLoinc();</span>
    }

    @Override
    public String getIdSource() {
<span class="fc" id="L78">        return TestResultType.ID_SOURCE_LOINC;</span>
    }
    // also: getName(), getUnit(), compareTo()

    public String getNameKey() {
<span class="fc" id="L83">        return &quot;loinctest.&quot; + loinc + &quot;.&quot; + id + &quot;.name&quot;;</span>
    }

    /** this will not be populated unless it has been set in the web layer using the name key above... */
    @Override
    public String getName() {
<span class="pc bpc" id="L89" title="1 of 2 branches missed.">        if (name == null) {</span>
<span class="nc" id="L90">            return &quot;i18n from nameKey required before display&quot;;</span>
        }

<span class="fc" id="L93">        return name;</span>
    }

    public void setNameLocal(String name) {
<span class="fc" id="L97">        this.name = name;</span>
<span class="fc" id="L98">    }</span>

    //
    // regular getters/setters
    //

    @Override
    public Long getId() {
<span class="fc" id="L106">        return id;</span>
    }

    public void setId(Long id) {
<span class="nc" id="L110">        this.id = id;</span>
<span class="nc" id="L111">    }</span>

    public String getLoinc() {
<span class="fc" id="L114">        return loinc;</span>
    }

    public void setLoinc(String loinc) {
<span class="nc" id="L118">        this.loinc = loinc;</span>
<span class="nc" id="L119">    }</span>

    @Override
    public String getUnit() {
<span class="fc" id="L123">        return unit;</span>
    }

    public void setUnit(String unit) {
<span class="nc" id="L127">        this.unit = unit;</span>
<span class="nc" id="L128">    }</span>

    public String getOnlineRefKey() {
<span class="fc" id="L131">        return onlineRefKey;</span>
    }

    public void setOnlineRefKey(String onlineRefKey) {
<span class="nc" id="L135">        this.onlineRefKey = onlineRefKey;</span>
<span class="nc" id="L136">    }</span>

    @Override
    public ValueType getExpectedValueType() {
<span class="fc" id="L140">        return expectedValueType;</span>
    }

    public void setExpectedValueType(ValueType expectedValueType) {
<span class="nc" id="L144">        this.expectedValueType = expectedValueType;</span>
<span class="nc" id="L145">    }</span>

    @Override
    public int compareTo(TestResultType trt) {
        // TODO this won't work if the (localized) name hasn't yet been set, on the web side.
        // fail-fast option: throw error in that case?
<span class="fc" id="L151">        return this.getName().compareTo(trt.getName());</span>
    }

    @Override
    public boolean equals(Object o) {
<span class="pc bpc" id="L156" title="1 of 2 branches missed.">        if (this == o) {</span>
<span class="nc" id="L157">            return true;</span>
        }
<span class="pc bpc" id="L159" title="2 of 4 branches missed.">        if (o == null || getClass() != o.getClass()) {</span>
<span class="nc" id="L160">            return false;</span>
        }
<span class="fc" id="L162">        LoincTest loincTest = (LoincTest) o;</span>
<span class="pc bpc" id="L163" title="3 of 6 branches missed.">        return getId().equals(loincTest.getId()) &amp;&amp; getLoinc().equals(loincTest.getLoinc()) &amp;&amp; getExpectedValueType() == loincTest.getExpectedValueType();</span>
    }

    @Override
    public int hashCode() {
<span class="fc" id="L168">        return Objects.hash(id, loinc, expectedValueType);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>
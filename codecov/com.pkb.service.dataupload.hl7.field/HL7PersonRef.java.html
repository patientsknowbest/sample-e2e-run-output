<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HL7PersonRef.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">E2E Tests Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.pkb.service.dataupload.hl7.field</a> &gt; <span class="el_source">HL7PersonRef.java</span></div><h1>HL7PersonRef.java</h1><pre class="source lang-java linenums">package com.pkb.service.dataupload.hl7.field;

import com.pkb.service.dataupload.hl7.value.HL7String;
import org.w3c.dom.Element;

import static com.pkb.service.dataupload.hl7.HL7XmlDoc.getHl7Text;
import static com.pkb.service.dataupload.hl7.HL7XmlDoc.getIdentifier;

/**
 * Parses and holds an XCN (Extended Composite ID Number and Name for Persons) field. See HL7 v2.4 Chapter 2.
 */
<span class="fc" id="L12">public class HL7PersonRef {</span>

<span class="fc" id="L14">    private HL7String id = new HL7String();</span>
<span class="fc" id="L15">    private HL7String lastName = new HL7String();</span>
<span class="fc" id="L16">    private HL7String firstName = new HL7String();</span>
<span class="fc" id="L17">    private HL7String middleName = new HL7String();</span>
<span class="fc" id="L18">    private HL7String title = new HL7String();</span>
<span class="fc" id="L19">    private HL7String idAuthority = new HL7String();</span>

    public void parseXcn(Element element, String segment, int field) {
<span class="fc" id="L22">        id = getHl7Text(element, getIdentifier(segment, field, 1));</span>
<span class="fc" id="L23">        lastName = getHl7Text(element, getIdentifier(segment, field, 2));</span>
<span class="fc" id="L24">        firstName = getHl7Text(element, getIdentifier(segment, field, 3));</span>
<span class="fc" id="L25">        middleName = getHl7Text(element, getIdentifier(segment, field, 4));</span>
<span class="fc" id="L26">        title = getHl7Text(element, getIdentifier(segment, field, 6));</span>
<span class="fc" id="L27">        idAuthority = getHl7Text(element, getIdentifier(segment, field, 9));</span>
<span class="fc" id="L28">    }</span>

    /**
     * Determines if all mandatory values were provided.
     *
     * This returns true if, and only if, a last name was provided.
     *
     * @return true - iff a last name was provided. false - otherwise.
     */
    public boolean isValid() {
<span class="fc" id="L38">        return lastName.isNotBlank();</span>
    }

    /**
     * Constructs a display string with all the information that is available.
     *
     * TODO: How to i18n?
     *
     * @return A displayable String for this name.
     */
    public String makeDisplayText() {
<span class="fc" id="L49">        String text = lastName.getString();</span>

<span class="fc bfc" id="L51" title="All 2 branches covered.">        if (middleName.isNotBlank()) {</span>
<span class="fc" id="L52">            text = middleName + &quot; &quot; + text;</span>
        }
<span class="pc bpc" id="L54" title="1 of 2 branches missed.">        if (firstName.isNotBlank()) {</span>
<span class="fc" id="L55">            text = firstName + &quot; &quot; + text;</span>
        }
<span class="fc bfc" id="L57" title="All 2 branches covered.">        if (title.isNotBlank()) {</span>
<span class="fc" id="L58">            text = title + &quot; &quot; + text;</span>
        }

<span class="fc" id="L61">        return text;</span>
    }

    public HL7String getId() {
<span class="fc" id="L65">        return id;</span>
    }

    public void setId(String id) {
<span class="nc" id="L69">        this.id = new HL7String(id);</span>
<span class="nc" id="L70">    }</span>

    public HL7String getLastName() {
<span class="fc" id="L73">        return lastName;</span>
    }

    public void setLastName(String lastName) {
<span class="nc" id="L77">        this.lastName = new HL7String(lastName);</span>
<span class="nc" id="L78">    }</span>

    public HL7String getFirstName() {
<span class="fc" id="L81">        return firstName;</span>
    }

    public void setFirstName(String firstName) {
<span class="nc" id="L85">        this.firstName = new HL7String(firstName);</span>
<span class="nc" id="L86">    }</span>

    public HL7String getMiddleName() {
<span class="fc" id="L89">        return middleName;</span>
    }

    public void setMiddleName(String middleName) {
<span class="nc" id="L93">        this.middleName = new HL7String(middleName);</span>
<span class="nc" id="L94">    }</span>

    public HL7String getTitle() {
<span class="fc" id="L97">        return title;</span>
    }

    public void setTitle(String title) {
<span class="nc" id="L101">        this.title = new HL7String(title);</span>
<span class="nc" id="L102">    }</span>

    public HL7String getIdAuthority() {
<span class="fc" id="L105">        return idAuthority;</span>
    }

    public void setIdAuthority(String idAuthority) {
<span class="nc" id="L109">        this.idAuthority = new HL7String(idAuthority);</span>
<span class="nc" id="L110">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>
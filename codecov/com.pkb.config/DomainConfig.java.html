<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DomainConfig.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">E2E Tests Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.pkb.config</a> &gt; <span class="el_source">DomainConfig.java</span></div><h1>DomainConfig.java</h1><pre class="source lang-java linenums">package com.pkb.config;

import com.pkb.common.config.ConfigStorage;
import com.pkb.common.config.PhrConfig;
import com.pkb.common.datetime.DateTimeService;
import com.pkb.common.testcontrol.services.PubSubNamespaceService;
import com.pkb.crypto.SSOCryptoHelper;
import com.pkb.datamodel.DatamodelEntityMappersConfig;
import com.pkb.datamodel.entity.mapper.AccessLogMapper;
import com.pkb.datamodel.entity.mapper.AccountMapper;
import com.pkb.datamodel.entity.mapper.AccountUserMapper;
import com.pkb.datamodel.entity.mapper.AffiliateMapper;
import com.pkb.datamodel.entity.mapper.ApiAuthSessionMapper;
import com.pkb.datamodel.entity.mapper.ApiClientMapper;
import com.pkb.datamodel.entity.mapper.AppointmentMessagingSettingsMapper;
import com.pkb.datamodel.entity.mapper.BulkInvitationOutcomeMapper;
import com.pkb.datamodel.entity.mapper.ConsentExpiryDecisionMapper;
import com.pkb.datamodel.entity.mapper.ConversationWorkflowMapper;
import com.pkb.datamodel.entity.mapper.CoreDevicesCredentialsMapper;
import com.pkb.datamodel.entity.mapper.EmisRegistrationDetailsMapper;
import com.pkb.datamodel.entity.mapper.Hl7PartnerGrantMapper;
import com.pkb.datamodel.entity.mapper.Hl7PartnerMapper;
import com.pkb.datamodel.entity.mapper.IdentityVerificationMapper;
import com.pkb.datamodel.entity.mapper.InvitationRepairJobMapper;
import com.pkb.datamodel.entity.mapper.LoginAttemptLogMapper;
import com.pkb.datamodel.entity.mapper.NationalIdMapper;
import com.pkb.datamodel.entity.mapper.NhsAppNotificationLogMapper;
import com.pkb.datamodel.entity.mapper.OrgLevelIdMapper;
import com.pkb.datamodel.entity.mapper.OrgMapper;
import com.pkb.datamodel.entity.mapper.OrgNetworkMapper;
import com.pkb.datamodel.entity.mapper.OrgNetworkMemberMapper;
import com.pkb.datamodel.entity.mapper.OutOfAreaRepairJobMapper;
import com.pkb.datamodel.entity.mapper.PHPlanTemplateMapper;
import com.pkb.datamodel.entity.mapper.PKBSpecialtyMapper;
import com.pkb.datamodel.entity.mapper.PatientAdditionalConsentMapper;
import com.pkb.datamodel.entity.mapper.PatientConsentDTOMapper;
import com.pkb.datamodel.entity.mapper.PersonContactMapper;
import com.pkb.datamodel.entity.mapper.PersonDemographicsMapper;
import com.pkb.datamodel.entity.mapper.PersonMapper;
import com.pkb.datamodel.entity.mapper.PersonSpecialtyMapper;
import com.pkb.datamodel.entity.mapper.PrivacyFlagsMapper;
import com.pkb.datamodel.entity.mapper.ReferenceDatumMapper;
import com.pkb.datamodel.entity.mapper.RegistrationEventMapper;
import com.pkb.datamodel.entity.mapper.RegistrationFailedAttemptLogMapper;
import com.pkb.datamodel.entity.mapper.SSOIdLinkMapper;
import com.pkb.datamodel.entity.mapper.SSOParameterEncryptionDetailsMapper;
import com.pkb.datamodel.entity.mapper.SciStorePatientCredentialsMapper;
import com.pkb.datamodel.entity.mapper.TeamAdditionalConsentMapper;
import com.pkb.datamodel.entity.mapper.TeamExportMapper;
import com.pkb.datamodel.entity.mapper.TeamLevelIdMapper;
import com.pkb.datamodel.entity.mapper.TeamWithConsentsMapper;
import com.pkb.datamodel.entity.mapper.TeamWithOrgMapper;
import com.pkb.datamodel.entity.mapper.UnreadableDocumentMapper;
import com.pkb.datamodel.entity.mapper.WebAppOtpMapper;
import com.pkb.domain.AccountService;
import com.pkb.domain.AccountSymmetricKeyService;
import com.pkb.domain.AccountUserService;
import com.pkb.domain.AffiliateService;
import com.pkb.domain.ApiAuthService;
import com.pkb.domain.BaseMenuDataService;
import com.pkb.domain.BulkInvitationOutcomeService;
import com.pkb.domain.CoreDevicesCredentialsService;
import com.pkb.domain.CryptoModelSynchronisationService;
import com.pkb.domain.Hl7PartnerService;
import com.pkb.domain.IdentityVerificationService;
import com.pkb.domain.InvitationService;
import com.pkb.domain.LetterInvitationService;
import com.pkb.domain.LoginAttemptLogService;
import com.pkb.domain.NationalIdService;
import com.pkb.domain.OrgLevelIdService;
import com.pkb.domain.OrgNetworkService;
import com.pkb.domain.PHPlanTemplateService;
import com.pkb.domain.ParticipantService;
import com.pkb.domain.PersonContactService;
import com.pkb.domain.PkbPasswordRecoveryService;
import com.pkb.domain.PrivacyFlagsService;
import com.pkb.domain.ReferenceDatumService;
import com.pkb.domain.RegistrationEventService;
import com.pkb.domain.RegistrationFailedAttemptLogService;
import com.pkb.domain.SSOService;
import com.pkb.domain.SciStoreService;
import com.pkb.domain.TeamExportService;
import com.pkb.domain.TeamLevelIdService;
import com.pkb.domain.TeamResearchPartnerService;
import com.pkb.domain.UnreadableDocumentService;
import com.pkb.domain.UploadedDataDomainService;
import com.pkb.domain.UserCredentialsService;
import com.pkb.domain.appointment.AppointmentMessagingSettingsService;
import com.pkb.domain.appointment.EmisAppointmentService;
import com.pkb.domain.consent.ConsentService;
import com.pkb.domain.duplicate.PatientDemographicsService;
import com.pkb.domain.duplicate.TeamDomainService;
import com.pkb.domain.duplicate.person.PersonService;
import com.pkb.domain.messages.workflow.TrustedConversationWorkflowService;
import com.pkb.domain.nhs.NhsAppNotificationLogService;
import com.pkb.domain.provider.PKBSpecialtyService;
import com.pkb.domain.provider.PersonSpecialtyService;
import com.pkb.domain.routing.CryptoAccessGrantRequestRouteBuilder;
import com.pkb.externalid.config.ExternalIdConfiguration;
import com.pkb.kms.client.core.Kms;
import com.pkb.kms.client.core.KmsClientConfig;
import com.pkb.kms.client.reactive.ReactiveKmsClient;
import com.pkb.kms.client.reactive.ReactiveKmsClientImpl;
import com.pkb.reports.A19PatientStatusService;
import com.pkb.repository.A19PatientStatusRepository;
import com.pkb.repository.AccessLogRepository;
import com.pkb.repository.AccountRepository;
import com.pkb.repository.AccountUserRepository;
import com.pkb.repository.AffiliateRepository;
import com.pkb.repository.ApiAuthRefreshHistoryRepository;
import com.pkb.repository.ApiAuthSessionRepository;
import com.pkb.repository.ApiClientRepository;
import com.pkb.repository.AppointmentMessagingSettingsRepository;
import com.pkb.repository.BulkInvitationOutcomeRepository;
import com.pkb.repository.ConsentExpiryDecisionRepository;
import com.pkb.repository.ConversationWorkflowRepository;
import com.pkb.repository.CoreDevicesCredentialsRepository;
import com.pkb.repository.EMISSSORequestLogRepository;
import com.pkb.repository.EmisRegistrationDetailsRepository;
import com.pkb.repository.Hl7PartnerGrantRepository;
import com.pkb.repository.Hl7PartnerRepository;
import com.pkb.repository.IdentityVerificationRepository;
import com.pkb.repository.InstituteUserRepository;
import com.pkb.repository.InvitationRepairJobRepository;
import com.pkb.repository.InvitationRepository;
import com.pkb.repository.LetterInvitationRepository;
import com.pkb.repository.LoginAttemptLogRepository;
import com.pkb.repository.MenuDataRepository;
import com.pkb.repository.NationalIdRepository;
import com.pkb.repository.NhsAppNotificationLogRepository;
import com.pkb.repository.OrgLevelIdRepository;
import com.pkb.repository.OrgNetworkMemberRepository;
import com.pkb.repository.OrgNetworkRepository;
import com.pkb.repository.OrgRepository;
import com.pkb.repository.OutOfAreaRepairJobRepository;
import com.pkb.repository.PHPlanTemplateRepository;
import com.pkb.repository.PKBSpecialtyRepository;
import com.pkb.repository.ParticipantRepository;
import com.pkb.repository.PasswordRecoveryRepository;
import com.pkb.repository.PatientAdditionalConsentRepository;
import com.pkb.repository.PatientConsentRepository;
import com.pkb.repository.PersonContactRepository;
import com.pkb.repository.PersonRepository;
import com.pkb.repository.PersonSpecialtyRepository;
import com.pkb.repository.PrivacyFlagsRepository;
import com.pkb.repository.PublicRegistrationFailedAttemptLogRepository;
import com.pkb.repository.ReactiveAccountRepository;
import com.pkb.repository.ReferenceDatumRepository;
import com.pkb.repository.RegistrationEventRepository;
import com.pkb.repository.SSOIdLinkRepository;
import com.pkb.repository.SSOParameterEncryptionDetailsRepository;
import com.pkb.repository.SciStorePatientCredentialsRepository;
import com.pkb.repository.SecurityQuestionRepository;
import com.pkb.repository.TeamAdditionalConsentRepository;
import com.pkb.repository.TeamLevelIdRepository;
import com.pkb.repository.TeamRepository;
import com.pkb.repository.TeamResearchPartnerRepository;
import com.pkb.repository.UnreadableDocumentRepository;
import com.pkb.repository.UploadedDataRepository;
import com.pkb.repository.UserCredentialRepository;
import com.pkb.repository.WebAppOtpRepository;
import com.pkb.util.CorrelationIdUtil;
import org.apache.camel.Produce;
import org.apache.camel.ProducerTemplate;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Import;
import org.springframework.context.annotation.Profile;
import org.springframework.transaction.annotation.EnableTransactionManagement;

import javax.enterprise.inject.spi.CDI;
import java.security.SecureRandom;

@SuppressWarnings(&quot;ClassWithTooManyMethods&quot;)
@Configuration
@ComponentScan(basePackages = {&quot;com.pkb.datamodel.entity.mapper&quot;})
@EnableTransactionManagement
@Import({DatamodelEntityMappersConfig.class,
        DomainDataConfig.class,
        ExternalIdConfiguration.class,
        PhrDeletionServiceConfiguration.class})
<span class="fc" id="L184">public class DomainConfig {</span>

    @Bean
    public AccountService accountService(AccountRepository repository,
                                         AccountUserRepository accountUserRepository,
                                         DateTimeService dateTimeService,
                                         AccountMapper accountMapper,
                                         PersonRepository personRepository) {
<span class="fc" id="L192">        return new AccountService(repository, accountUserRepository, dateTimeService, accountMapper, personRepository);</span>
    }

    @Bean
    public NationalIdService nationalIdService(NationalIdRepository repository,
                                               NationalIdMapper nationalIdMapper) {
<span class="fc" id="L198">        return new NationalIdService(repository, nationalIdMapper);</span>
    }

    @Bean
    public EmisAppointmentService emisAppointmentService(EmisRegistrationDetailsRepository emisRegistrationDetailsRepository,
                                                         AccountSymmetricKeyService accountSymmetricKeyService,
                                                         EmisRegistrationDetailsMapper emisRegistrationDetailsMapper,
                                                         DateTimeService dateTimeService) {
<span class="fc" id="L206">        return new EmisAppointmentService(emisRegistrationDetailsRepository, accountSymmetricKeyService, emisRegistrationDetailsMapper, dateTimeService);</span>
    }

    @Bean
    public Hl7PartnerService hl7PartnerService(Hl7PartnerRepository partnerRepository,
                                               Hl7PartnerGrantRepository partnerGrantRepository,
                                               Hl7PartnerGrantMapper hl7PartnerGrantMapper,
                                               Hl7PartnerMapper hl7PartnerMapper) {
<span class="fc" id="L214">        return new Hl7PartnerService(partnerRepository, partnerGrantRepository, hl7PartnerGrantMapper, hl7PartnerMapper);</span>
    }

    @Bean
    public AccountSymmetricKeyService accountSymmetricKeyService(AccountRepository accountRepository,
                                                                 PersonRepository personRepository,
                                                                 Kms kms,
                                                                 CorrelationIdUtil correlationIdUtil) {
<span class="fc" id="L222">        return new AccountSymmetricKeyService(</span>
                kms,
                accountRepository,
                personRepository,
                correlationIdUtil);
    }

    @Bean
    public PersonService personService(DateTimeService dateTimeService,
                                       PersonRepository personRepository,
                                       OutOfAreaRepairJobRepository outOfAreaRepairJobRepo,
                                       OutOfAreaRepairJobMapper outOfAreaRepairJobMapper,
                                       PersonMapper personMapper,
                                       InvitationRepairJobMapper invitationRepairJobMapper,
                                       InvitationRepairJobRepository invitationRepairJobRepository,
                                       InstituteUserRepository instituteUserRepository, OrgRepository orgRepository) {
<span class="fc" id="L238">        return new PersonService(dateTimeService, personRepository, outOfAreaRepairJobRepo, outOfAreaRepairJobMapper,</span>
                personMapper, invitationRepairJobMapper, invitationRepairJobRepository, instituteUserRepository, orgRepository);
    }

    @Bean
    public PersonContactService personContactService(PersonContactRepository personContactRepository,
                                                     PersonContactMapper personContactMapper) {
<span class="fc" id="L245">        return new PersonContactService(personContactRepository, personContactMapper);</span>
    }

    @Bean
    public TeamDomainService teamDomainService(TeamRepository teamRepository,
                                               TeamWithOrgMapper teamWithOrgMapper,
                                               TeamWithConsentsMapper teamWithConsentsMapper) {
<span class="fc" id="L252">        return new TeamDomainService(teamRepository, teamWithOrgMapper, teamWithConsentsMapper);</span>
    }

    @Bean
    public RegistrationEventService registrationEventService(RegistrationEventRepository registrationEventRepository,
                                                             RegistrationEventMapper registrationEventMapper) {
<span class="fc" id="L258">        return new RegistrationEventService(registrationEventRepository, registrationEventMapper);</span>
    }

    @Bean
    public A19PatientStatusService a19PatientStatusService(PersonService personService,
                                                           A19PatientStatusRepository a19PatientStatusRepository,
                                                           PatientDemographicsService patientDemographicsService) {
<span class="fc" id="L265">        return new A19PatientStatusService(personService, a19PatientStatusRepository, patientDemographicsService);</span>
    }

    @Bean
    public PatientDemographicsService PatientDemographicsService(PersonRepository personRepository,
                                                                 OrgLevelIdRepository orgLevelIdRepository,
                                                                 TeamLevelIdRepository teamLevelIdRepository,
                                                                 PersonDemographicsMapper personDemographicsMapper) {
<span class="fc" id="L273">        return new PatientDemographicsService(personRepository, orgLevelIdRepository, teamLevelIdRepository, personDemographicsMapper);</span>
    }

    @Bean
    public SSOService ssoService(DateTimeService dateTimeService,
                                 SSOIdLinkRepository ssoIdLinkRepository,
                                 SSOParameterEncryptionDetailsRepository ssoParameterEncryptionDetailsRepository,
                                 SSOParameterEncryptionDetailsMapper ssoParameterEncryptionDetailsMapper,
                                 SSOIdLinkMapper ssoIdLinkMapper,
                                 EMISSSORequestLogRepository emisssoRequestLogRepository,
                                 CorrelationIdUtil correlationIdUtil,
                                 Kms kms) {
<span class="fc" id="L285">        return new SSOService(dateTimeService, ssoIdLinkRepository, ssoParameterEncryptionDetailsRepository,</span>
                ssoParameterEncryptionDetailsMapper, ssoIdLinkMapper, emisssoRequestLogRepository, kms, correlationIdUtil);
    }

    @Bean
    public TrustedConversationWorkflowService trustedConversationWorkflowService(PhrConfig config,
                                                                                 ConversationWorkflowRepository repository,
                                                                                 ConversationWorkflowMapper mapper,
                                                                                 DateTimeService dateTimeService) {
<span class="fc" id="L294">        return new TrustedConversationWorkflowService(config, repository, mapper, dateTimeService);</span>
    }

    @Bean
    public TeamResearchPartnerService teamResearchPartnerService(TeamResearchPartnerRepository teamResearchPartnerRepository) {
<span class="fc" id="L299">        return new TeamResearchPartnerService(teamResearchPartnerRepository);</span>
    }

    @Bean
    public UnreadableDocumentService unreadableDocumentService(UnreadableDocumentRepository repository, UnreadableDocumentMapper mapper) {
<span class="fc" id="L304">        return new UnreadableDocumentService(repository, mapper);</span>
    }

    @Bean
    public SSOCryptoHelper ssoCryptoHelper() {
<span class="fc" id="L309">        return new SSOCryptoHelper();</span>
    }

    @Bean
    public RegistrationFailedAttemptLogService RegistrationFailedAttemptLogService(PublicRegistrationFailedAttemptLogRepository publicRegistrationFailedAttemptLogRepository,
                                                                                   RegistrationFailedAttemptLogMapper registrationFailedAttemptLogMapper) {
<span class="fc" id="L315">        return new RegistrationFailedAttemptLogService(publicRegistrationFailedAttemptLogRepository, registrationFailedAttemptLogMapper);</span>
    }

    @Bean
    public SciStoreService sciStoreService(SciStorePatientCredentialsRepository sciStorePatientCredentialsRepository,
                                           SciStorePatientCredentialsMapper sciStorePatientCredentialsMapper) {
<span class="fc" id="L321">        return new SciStoreService(sciStorePatientCredentialsRepository, sciStorePatientCredentialsMapper);</span>
    }

    @Bean
    public PrivacyFlagsService privacyFlagsService(PrivacyFlagsRepository privacyFlagsRepository, PrivacyFlagsMapper privacyFlagsMapper,
                                                   AccessLogRepository accessLogRepository, AccessLogMapper accessLogMapper) {
<span class="fc" id="L327">        return new PrivacyFlagsService(privacyFlagsRepository, privacyFlagsMapper, accessLogRepository, accessLogMapper);</span>
    }


    @Bean
    public LoginAttemptLogService loginAttemptLogService(LoginAttemptLogRepository loginAttemptLogRepository, DateTimeService dateTimeService,
                                                         LoginAttemptLogMapper loginAttemptLogMapper) {
<span class="fc" id="L334">        return new LoginAttemptLogService(loginAttemptLogRepository, dateTimeService, loginAttemptLogMapper);</span>
    }

    @Bean
    public ReferenceDatumService referenceDatumService(ReferenceDatumRepository referenceDatumRepository, ReferenceDatumMapper referenceDatumMapper) {
<span class="fc" id="L339">        return new ReferenceDatumService(referenceDatumRepository, referenceDatumMapper);</span>
    }

    @Bean
    public CoreDevicesCredentialsService coreDevicesCredentialsService(CoreDevicesCredentialsRepository coreDevicesCredentialsRepository,
                                                                       CoreDevicesCredentialsMapper coreDevicesCredentialsMapper) {
<span class="fc" id="L345">        return new CoreDevicesCredentialsService(coreDevicesCredentialsRepository, coreDevicesCredentialsMapper);</span>
    }

    @Bean
    public PKBSpecialtyService pkbSpecialtyService(PKBSpecialtyRepository pkbSpecialtyRepository, PKBSpecialtyMapper pkbSpecialtyMapper) {
<span class="fc" id="L350">        return new PKBSpecialtyService(pkbSpecialtyRepository, pkbSpecialtyMapper);</span>
    }

    @Bean
    public PersonSpecialtyService personSpecialtyService(PersonSpecialtyRepository personSpecialtyRepository, PersonSpecialtyMapper mapper) {
<span class="fc" id="L355">        return new PersonSpecialtyService(personSpecialtyRepository, mapper);</span>
    }

    @Bean
    public AffiliateService affiliateService(AffiliateRepository affiliateRepository, AffiliateMapper mapper) {
<span class="fc" id="L360">        return new AffiliateService(affiliateRepository, mapper);</span>
    }

    @Bean
    public BulkInvitationOutcomeService bulkInvitationOutcomeService(BulkInvitationOutcomeRepository bulkInvitationOutcomeRepository, BulkInvitationOutcomeMapper mapper) {
<span class="fc" id="L365">        return new BulkInvitationOutcomeService(bulkInvitationOutcomeRepository, mapper);</span>
    }

    @Bean
    public AccountUserService accountUserService(AccountUserRepository accountUserRepository, AccountUserMapper mapper, PhrConfig config) {
<span class="fc" id="L370">        return new AccountUserService(accountUserRepository, mapper, config);</span>
    }

    @Bean
    public InvitationService invitationService(InvitationRepository invitationRepository) {
<span class="fc" id="L375">        return new InvitationService(invitationRepository);</span>
    }

    @Bean
    public LetterInvitationService letterInvitationService(LetterInvitationRepository letterInvitationRepository) {
<span class="fc" id="L380">        return new LetterInvitationService(letterInvitationRepository);</span>
    }

    @Bean
    public UserCredentialsService userCredentialsService(UserCredentialRepository userCredentialRepository, Kms kmsClient) {
<span class="fc" id="L385">        return new UserCredentialsService(userCredentialRepository, kmsClient);</span>
    }

    @Bean
    public TeamLevelIdService teamLevelIdService(TeamLevelIdRepository teamLevelIdRepository, TeamLevelIdMapper teamLevelIdMapper) {
<span class="fc" id="L390">        return new TeamLevelIdService(teamLevelIdRepository, teamLevelIdMapper);</span>
    }

    @Bean
    public OrgLevelIdService orgLevelIdService(OrgLevelIdRepository orgLevelIdRepository, OrgLevelIdMapper orgLevelIdMapper) {
<span class="fc" id="L395">        return new OrgLevelIdService(orgLevelIdRepository, orgLevelIdMapper);</span>
    }

    @Bean
    public IdentityVerificationService identityVerificationService(IdentityVerificationRepository repository, IdentityVerificationMapper mapper) {
<span class="fc" id="L400">        return new IdentityVerificationService(repository, mapper);</span>
    }

    @Bean
    public NhsAppNotificationLogService nhsNotificationLogService(DateTimeService dateTimeService, NhsAppNotificationLogRepository nhsNotificationLogRepository, NhsAppNotificationLogMapper nhsNotificationLogMapper) {
<span class="fc" id="L405">        return new NhsAppNotificationLogService(dateTimeService, nhsNotificationLogRepository, nhsNotificationLogMapper);</span>
    }

    @Bean
    public AppointmentMessagingSettingsService appointmentMessagingService(AppointmentMessagingSettingsRepository repository, AppointmentMessagingSettingsMapper mapper) {
<span class="fc" id="L410">        return new AppointmentMessagingSettingsService(repository,mapper);</span>
    }

    //These are defined in phr-common in phr, which is still using CDI. We shouldn't have multiple instances of these beans,
    // so we get them from the CDI provider. Once CDI is gone from PHR, we could e.g. use a singular spring bean which is defined
    // within omni and the configuration class imported into phr.
    @Bean
    public DateTimeService dateTimeService() {
<span class="nc" id="L418">        return CDI.current().select(DateTimeService.class).get();</span>
    }

    @Bean
    public ConfigStorage configStorage() {
<span class="nc" id="L423">        return CDI.current().select(ConfigStorage.class).get();</span>
    }

    @Bean
    public UploadedDataDomainService uploadedDataDomainService(UploadedDataRepository uploadedDataRepository, PersonService personService) {
<span class="fc" id="L428">        return new UploadedDataDomainService(uploadedDataRepository, personService);</span>
    }

    @Bean
    public PkbPasswordRecoveryService passwordRecoveryService(DateTimeService dateTimeService, SecurityQuestionRepository securityQuestionRepository,
                                                              PasswordRecoveryRepository passwordRecoveryRepository) {
<span class="fc" id="L434">        return new PkbPasswordRecoveryService(dateTimeService, securityQuestionRepository, passwordRecoveryRepository);</span>
    }

    @Bean
    public TeamExportService teamExportService(TeamRepository teamRepository, TeamExportMapper mapper, PhrConfig config) {
<span class="fc" id="L439">        return new TeamExportService(teamRepository, mapper, config);</span>
    }

    @Bean
    public ParticipantService participantService(ParticipantRepository participantRepository) {
<span class="fc" id="L444">        return new ParticipantService(participantRepository);</span>
    }

    @Bean
    public ConsentService consentService(PatientConsentRepository patientConsentRepository,
                                         DateTimeService dateTimeService, PersonRepository personRepository,
                                         PatientConsentDTOMapper patientConsentDTOMapper,
                                         TeamAdditionalConsentRepository teamAdditionalConsentRepository,
                                         PatientAdditionalConsentRepository patientAdditionalConsentRepository,
                                         ConsentExpiryDecisionRepository consentExpiryDecisionRepository,
                                         TeamAdditionalConsentMapper teamAdditionalConsentMapper,
                                         PatientAdditionalConsentMapper patientAdditionalConsentMapper,
                                         ConsentExpiryDecisionMapper consentExpiryDecisionMapper,
                                         PhrConfig configuration) {
<span class="fc" id="L458">        return new ConsentService(patientConsentRepository, dateTimeService, personRepository, patientConsentDTOMapper,</span>
                teamAdditionalConsentRepository, patientAdditionalConsentRepository, consentExpiryDecisionRepository, teamAdditionalConsentMapper,
                patientAdditionalConsentMapper, consentExpiryDecisionMapper, configuration);
    }

    @Bean
    @Profile(&quot;!unittest&quot;)
    public CryptoAccessGrantRequestRouteBuilder modelChangeEventRouteBuilder(
            PubSubNamespaceService pubSubNamespaceService,
            @Value(&quot;#{environment.GOOGLE_APPLICATION_CREDENTIALS}&quot;) String serviceAccountKey,
            PhrConfig config) {
<span class="fc" id="L469">        return new CryptoAccessGrantRequestRouteBuilder(pubSubNamespaceService, serviceAccountKey, config);</span>
    }

    @SuppressWarnings(&quot;unused&quot;)
    @Produce(CryptoAccessGrantRequestRouteBuilder.GRANT_ACCESS_TO_ORG_REQUEST)
    private ProducerTemplate personOrgRelationshipChangeProducer;

    @Bean
    public KmsClientConfig kmsClientConfig() {
<span class="fc" id="L478">        return CDI.current().select(KmsClientConfig.class).get();</span>
    }

    @Bean
    public ReactiveKmsClient reactiveKmsClient(KmsClientConfig config) {
<span class="fc" id="L483">        return new ReactiveKmsClientImpl(config);</span>
    }

    @Bean
    public CryptoModelSynchronisationService modelChangeEventPublishingService(PersonRepository personRepository, Kms kms, ReactiveKmsClient reactiveKmsClient, CorrelationIdUtil correlationIdUtil, OrgRepository orgRepository, AccountRepository accountRepository, ReactiveAccountRepository reactiveAccountRepository, PhrConfig config, InstituteUserRepository instituteUserRepository, ConsentService consentService) {
<span class="fc" id="L488">        return new CryptoModelSynchronisationService(personRepository, personOrgRelationshipChangeProducer, kms, reactiveKmsClient, correlationIdUtil, orgRepository, accountRepository, instituteUserRepository, reactiveAccountRepository, config, consentService, null);</span>
    }

    @Bean
    public OrgNetworkService orgNetworkService(OrgNetworkRepository orgNetworkRepository, OrgNetworkMemberRepository orgNetworkMemberRepository, OrgRepository orgRepository, PersonService personService, OrgMapper orgMapper, OrgNetworkMapper orgNetworkMapper, OrgNetworkMemberMapper orgNetworkMemberMapper, DateTimeService dateTimeService, CryptoModelSynchronisationService cryptoModelSyncService) {
<span class="fc" id="L493">        return new OrgNetworkService(orgNetworkRepository, orgNetworkMemberRepository, orgRepository, orgMapper, orgNetworkMapper, orgNetworkMemberMapper, personService, dateTimeService, cryptoModelSyncService);</span>
    }

    @Bean
    public ApiAuthService apiAuthService(ApiAuthRefreshHistoryRepository apiAuthRefreshHistoryRepository,
                                         ApiAuthSessionRepository apiAuthSessionRepository,
                                         ApiAuthSessionMapper apiAuthSessionMapper,
                                         ApiClientRepository apiClientRepository,
                                         ApiClientMapper apiClientMapper,
                                         WebAppOtpRepository webAppOtpRepository,
                                         WebAppOtpMapper webAppOtpMapper,
                                         DateTimeService dateTimeService) {
<span class="fc" id="L505">        return new ApiAuthService(apiAuthRefreshHistoryRepository, apiAuthSessionRepository,</span>
                apiAuthSessionMapper, apiClientRepository, apiClientMapper, webAppOtpRepository, webAppOtpMapper, dateTimeService);
    }

    @Bean
    public PHPlanTemplateService phPlanTemplateService(PHPlanTemplateRepository phPlanTemplateRepository, PHPlanTemplateMapper phPlanTemplateMapper) {
<span class="fc" id="L511">        return new PHPlanTemplateService(phPlanTemplateRepository, phPlanTemplateMapper);</span>
    }

    @Bean
    public BaseMenuDataService baseMenuDataService(MenuDataRepository menuDataRepository) {
<span class="fc" id="L516">        return new BaseMenuDataService(menuDataRepository);</span>
    }

    @Bean
    public SecureRandom secureRandom() {
<span class="fc" id="L521">        return new SecureRandom();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>
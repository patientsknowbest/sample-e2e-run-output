<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EHRField.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">E2E Tests Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.pkb.annotation</a> &gt; <span class="el_source">EHRField.java</span></div><h1>EHRField.java</h1><pre class="source lang-java linenums">package com.pkb.annotation;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Documented
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface EHRField {

    /**
     * Possible EHRData fields for a value to be stored so it can be used in queries.
     * Leave queryField blank, or use ENCRYPTED (the default in @EHRField) for fields to be stored encrypted.
     *
     * @author rob
     */
<span class="fc" id="L20">    enum QueryField {</span>
<span class="fc" id="L21">        ENCRYPTED, // default: no need to specify in the annotation</span>

        // NOTE: case is important; these should match the EHRData field names so Hibernate is happy
<span class="fc" id="L24">        id,</span>

<span class="fc" id="L26">        documentMetadataId, status, accountId,</span>

<span class="fc" id="L28">        deleted,</span>

<span class="fc" id="L30">        date01, date02,</span>

        // TODO: reserve these for enteredDate and persistedDate and firstReadDate ONLY
<span class="fc" id="L33">        date03, date04, date05, code01CodeSystem, code01Code,</span>

<span class="fc" id="L35">        string01, string02, string03, string04, string05,</span>

        // reserved for SourceDetails, but needed for field migrations...
        /** SourceDetails.personId */
<span class="fc" id="L39">        sourcePersonId,</span>
        /** SourceDetails.teamId */
<span class="fc" id="L41">        sourceTeamId,</span>
        /** SourceDetails.orgId */
<span class="fc" id="L43">        sourceOrgId,</span>
        /** SourceDetails.connectingOrgId */
<span class="fc" id="L45">        connectingOrgId,</span>
        /** SourceDetails.hl7PartnerId */
<span class="fc" id="L47">        hl7PartnerId,</span>

<span class="fc" id="L49">        string09, string10, string11, string12, string13, string14,</span>

<span class="fc" id="L51">        long01, long02, long03, long04,</span>

<span class="fc" id="L53">        boolean01, boolean02, boolean03,</span>

<span class="fc" id="L55">        uuid01,</span>

        // possible: remove these from available mappings and only handle via DTO interfaces?
<span class="fc" id="L58">        uniqueId,</span>
        // especially these ones (BUT we may need to complete migration first)
<span class="fc" id="L60">        enteredDate, persistedDate, route, uploadedDataId, responsibleOrganisationIdentifier</span>
    }

<span class="fc" id="L63">    enum ValueDTOType {</span>
        /**
         * default; save the sub-DTO (or list of DTOs) as an encrypted Map&amp;#x3C;String,Object&amp;#x3E;. Annotated fields in the sub-DTO can't be
         * queryable.
         */
<span class="fc" id="L68">        NESTED,</span>
        /** treated as if the fields in the sub-DTO are fields in the parent DTO. Queryable fields, or encrypted. */
<span class="fc" id="L70">        FLATTENED</span>
    }

    /**
     *
     */
    QueryField queryField() default QueryField.ENCRYPTED;

    /**
     * For encrypted fields: by default the field name is used as the encrypted name, but you can set another one here.
     * Example: SourceDetails.text is stored as &quot;sourceText&quot; to avoid conflicts.
     *
     * @return
     */
    String overrideEncryptedName() default &quot;&quot;;


    ValueDTOType valueDtoType() default ValueDTOType.NESTED; // by default, store sub-DTOs as encrypted Maps

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>
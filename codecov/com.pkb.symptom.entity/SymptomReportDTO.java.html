<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SymptomReportDTO.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">E2E Tests Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.pkb.symptom.entity</a> &gt; <span class="el_source">SymptomReportDTO.java</span></div><h1>SymptomReportDTO.java</h1><pre class="source lang-java linenums">//------------------------------------------------------------------------------
//
// Copyright (c) 2011 PatientsKnowBest, Inc. All Rights Reserved.
//
// $Id: $
//
//------------------------------------------------------------------------------

package com.pkb.symptom.entity;

import com.pkb.annotation.EHRField;
import com.pkb.annotation.EHRField.QueryField;
import com.pkb.annotation.EHRMigration;
import com.pkb.app.dto.DTOBaseFields;
import com.pkb.app.entity.SourceDetails;
import com.pkb.app.interfaces.IBaseDTO;
import com.pkb.code.entity.Code;
import com.pkb.entities.enums.MenuDataType;

import java.io.Serializable;
import java.time.Instant;
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.util.Optional;

import static java.time.ZonedDateTime.ofInstant;

/**
 * A symptom report - recorded by the patient with a timestamp
 */
@EHRMigration(migratorClass = SymptomReportMigrator.class)
public class SymptomReportDTO implements IBaseDTO, Serializable {

    private static final long serialVersionUID = 8322647369112978997L;

<span class="fc" id="L36">    public static final MenuDataType MS_PATH = MenuDataType.symptomReport;</span>

    // field names for menu data and trim source
    public static final String MD_SYMPTOM_PRIVATE_ID = &quot;symptomPrivateId&quot;;

    public static final String MD_SYMPTOM = &quot;symptom&quot;;

    public static final String MD_REPORT_DATE = &quot;reportDate&quot;;

    // Used in source variables (for the SymptomSeverity object)
    public static final String MD_SEVERITY = &quot;severity&quot;;

    // Stored in the menu data
    public static final String MD_SEVERITY_0_TO_3 = &quot;severity0to3&quot;;

    public static final String MD_PRIVATE_SEVERITY = &quot;privateSeverity&quot;;

    public static final String MD_DATA_ENTERER_UID = &quot;dataEntererUid&quot;;

    // Used in menudata to link latest SymptomReport to parent alarm record
    public static final String MD_ALARM_ID = &quot;alarmId&quot;;

    public static final String MD_SYMPTOM_ID = &quot;symptomId&quot;;

    @EHRField(queryField = QueryField.id)
    private Long id; // this is a menudata id

    //Really this ought to be called just &quot;symptomId&quot; now that PrivateIds are a thing of the past
    //Unfortunately the dto field names were used as keys  to store the encrypted real values of the
    // private id fields in the xml data, which we rely on to migrate the last few accounts that haven't
    //completed the private maps migration. Rather than putting in yet more special-case code to handle
    //this it's safer just to keep this field named as-is until we can finally bin the migration
    @EHRField(queryField = QueryField.long01)
    private Long symptomPrivateId;

    @EHRField(queryField = QueryField.date01)
    private Instant reportDate;

    @EHRField(queryField = QueryField.string03)
    private String severityPrivateId;

    private SymptomSeverity severity;

    // Read only - dataEntererUid is always written as the person doing the saving
    @EHRField
    private Long dataEntererUid;

    // in FHIR the Symptoms are typically represented as Observations
    // this is equivalent to Observation.comment https://www.hl7.org/fhir/observation.html
    @EHRField
    private String comments;

<span class="fc" id="L88">    private DTOBaseFields baseFields = new DTOBaseFields(); // saved in DB by EHRBean</span>

    private String apiRef;// not saved in DB

    private Code codeDetails; //not saved in DB

    private SourceDetails source;

    /**
     * DELIBERATELY PROTECTED DO NOT CHANGE! Use the available constructors!
     * &lt;p&gt;
     * Would have even less visibility but JPA spec &amp; Hibernate requires a no arg const. which is public or protected.
     * Other than those, nothing should be able to construct without parameters, as changelog wouldn't be filled correctly etc.
     */
<span class="fc" id="L102">    protected SymptomReportDTO() {</span>
<span class="fc" id="L103">        this.source = new SourceDetails();</span>
<span class="fc" id="L104">    }</span>

<span class="fc" id="L106">    public SymptomReportDTO(SourceDetails sourceDetails) {</span>
<span class="fc" id="L107">        this.source = sourceDetails;</span>
<span class="fc" id="L108">    }</span>

    // debugging util
    @Override
    public String toString() {
<span class="nc" id="L113">        return &quot;[SymptomReportDTO: id &quot; + id +</span>
                &quot;, symptomId &quot; + symptomPrivateId +
                &quot; @ &quot; + reportDate +
                &quot;, &quot; + severity + &quot;]&quot;;
    }

    // getters/setters

    @Override
    public Long getId() {
<span class="fc" id="L123">        return id;</span>
    }

    @Override
    public void setId(Long id) {
<span class="fc" id="L128">        this.id = id;</span>
<span class="fc" id="L129">    }</span>

    public Instant getReportDate() {
<span class="fc" id="L132">        return reportDate;</span>
    }

    public Optional&lt;ZonedDateTime&gt; getReportDateUTC() {
<span class="pc bpc" id="L136" title="1 of 2 branches missed.">        if (reportDate == null) {</span>
<span class="nc" id="L137">            return Optional.empty();</span>
        }
<span class="fc" id="L139">        return Optional.of(ofInstant(reportDate, ZoneId.of(&quot;UTC&quot;)));</span>
    }

    public void setReportDate(Instant reportDate) {
<span class="fc" id="L143">        this.reportDate = reportDate;</span>
<span class="fc" id="L144">    }</span>

    public SymptomSeverity getSeverity() {
<span class="fc" id="L147">        return severity;</span>
    }

    public void setSeverity(SymptomSeverity severity) {
<span class="fc" id="L151">        this.severity = severity;</span>
<span class="fc" id="L152">    }</span>

    public Long getDataEntererUid() {
<span class="fc" id="L155">        return dataEntererUid;</span>
    }

    public void setDataEntererUid(Long dataEntererUid) {
<span class="fc" id="L159">        this.dataEntererUid = dataEntererUid;</span>
<span class="fc" id="L160">    }</span>

    @Override
    public SourceDetails getSource() {
<span class="fc" id="L164">        return source;</span>
    }

    @Override
    public DTOBaseFields getBaseFields() {
<span class="fc" id="L169">        return baseFields;</span>
    }

    public Long getSymptomPrivateId() {
<span class="fc" id="L173">        return symptomPrivateId;</span>
    }

    public void setSymptomPrivateId(Long symptomPrivateId) {
<span class="fc" id="L177">        this.symptomPrivateId = symptomPrivateId;</span>
<span class="fc" id="L178">    }</span>

    public String getSeverityPrivateId() {
<span class="fc" id="L181">        return severityPrivateId;</span>
    }

    public void setSeverityPrivateId(String severityPrivateId) {
<span class="fc" id="L185">        this.severityPrivateId = severityPrivateId;</span>
<span class="fc" id="L186">    }</span>

    public String getComments() {
<span class="fc" id="L189">        return comments;</span>
    }

    public void setComments(String comments) {
<span class="fc" id="L193">        this.comments = comments;</span>
<span class="fc" id="L194">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>